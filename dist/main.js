(()=>{"use strict";function e(e){let t=e;const o=document.querySelector(".todo-list"),l=document.createElement("div");l.className="todo",l.id=t.title;const c=document.createElement("div");c.className="todo-header";const n=document.createElement("h4");n.textContent=t.title;const s=document.createElement("p");s.textContent=t.date,c.appendChild(n),c.appendChild(s);const r=document.createElement("div");r.className="todo-content";const d=document.createElement("p");d.id="description",d.textContent=t.description;const a=document.createElement("div");a.className="delete-todo",a.textContent="Delete",r.appendChild(d),l.appendChild(c),l.appendChild(r),l.appendChild(a),o.appendChild(l)}function t(){document.querySelectorAll(".delete-todo").forEach((e=>{e.addEventListener("click",(e=>{console.log(e);let t=e.target.parentNode.id;l(list_of_projects,t)}))}))}const o=e=>{document.querySelectorAll(".project-item").forEach((e=>{e.classList.contains("active")&&e.classList.remove("active")})),e.toggle("active"),t()};function l(e,t){console.log("executing delete_task");let o=e;console.log(o);let l,c=document.querySelectorAll(".project-item"),n=t;console.log("This is the target task: ",n),c.forEach((e=>{e.classList.contains("active")&&(l=e.id,console.log("Here is the target project: ",l))})),o.forEach((e=>{e.name===l&&(l=e,console.log("Found the actual project from list of projects! :) ",l))})),console.log("Task before being deleted",l.getTasks()),l.deleteTask(n),console.log("Task deleted",l.getTasks()),console.log(l);const s=document.getElementById(`${n}`);for(;s.firstChild;)s.removeChild(s.firstChild);s.remove()}!function(){document.querySelector("#home");const c=document.querySelector("#article-project"),n=document.querySelector("#article-todo"),s=document.querySelector("#openprojectform"),r=document.querySelector("#submit_project"),d=document.querySelector("#exit-project-form"),a=document.querySelector("#opentodoform"),i=document.querySelector("#submit_todo"),m=document.querySelector("#exit-todo-form"),u=[];c.addEventListener("click",(e=>{s.style.transform="scale(1)",console.log(e.target)})),n.addEventListener("click",(e=>{a.style.transform="scale(1)"})),m.addEventListener("click",(e=>a.style.transform="scale(0)")),d.addEventListener("click",(e=>s.style.transform="scale(0)")),r.addEventListener("click",(l=>{l.preventDefault();let c=(e=>{const t=(e=>{let t=[];const o={addTask:e=>{t.push(e)},deleteTask:e=>{t=t.filter((t=>t.title!=e))},getTasks:()=>t};return Object.assign(o,{name:e})})(e);return t})(s.title.value);console.log(c),function(e){let t=e,o=e.name,l=document.querySelector(".project-list"),c=document.createElement("div");c.className="project-item",c.id=`${o}`,c.textContent=o;let n=document.createElement("div");n.className="container",c.appendChild(n),l.appendChild(c),n.textContent=t.getTasks()}(c),u.push(c),console.log("Here is list of projects",u),s.style.transform="scale(0)",(l=>{let c=l;document.querySelectorAll(".project-item").forEach((t=>{t.addEventListener("click",(l=>{o(t.classList),console.log(l),console.log(t.classList),console.log(t.id),document.querySelector(".todo-list").innerHTML="",(t=>{let o=document.querySelector(".todo-list"),l=c.map((e=>e.name)).indexOf(t),n=c[l].getTasks();n.length>0?n.forEach((t=>e(t))):o.innerHTML=""})(t.id)}))})),t()})(u),(()=>{let e=document.querySelector(".project-list").lastElementChild;o(e.classList)})()})),i.addEventListener("click",(o=>{o.preventDefault();let c=((e,t,o)=>{const l=((e,t,o)=>({title:e,date:t,description:o}))(e,t,o);return l})(a.title.value,a.date.value,a.description.value);((e,o)=>{let l,c,n,s=o,r=document.querySelector(".project-list"),d=Array.from(r.children);console.log("Here is the children from render_task_page: ",d);let a=d.map((e=>e.className)).indexOf("project-item active");l=d[a],l=l.textContent,console.log("Here is the project id",l),c=s.map((e=>e.name)).indexOf(l),console.log("Here is the addproject",c),-1===c&&console.log("Error, project not found."),n=s[c],console.log(n),n.addTask(e),console.log(`${JSON.stringify(n.getTasks())}`),s.forEach((e=>{console.log(`Here is the project: ${JSON.stringify(e)} and list of tasks: ${JSON.stringify(e.getTasks())}`)})),t()})(c,u),e(c),a.style.transform="scale(0)",document.querySelectorAll(".delete-todo").forEach((e=>{e.addEventListener("click",(e=>{console.log(e);let t=e.target.parentNode.id;l(u,t)}))}))}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL1VJLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9tb2R1bGVzL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL21vZHVsZXMvdG9kby5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZV9uZXdfcHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCJcclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlX3Rhc2tfY29udGFpbmVyKG5ld190YXNrKXtcclxuICAgICAgICBsZXQgdGFzayA9IG5ld190YXNrXHJcbiAgICAgICAgY29uc3QgdG9kb19saXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvZG8tbGlzdCcpXHJcbiAgICAgICAgY29uc3QgdG9kb19kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIHRvZG9fZGl2LmNsYXNzTmFtZSA9ICd0b2RvJ1xyXG4gICAgICAgIHRvZG9fZGl2LmlkID0gdGFzay50aXRsZVxyXG4gICAgICAgIGNvbnN0IHRvZG9faGVhZGVyX2RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgdG9kb19oZWFkZXJfZGl2LmNsYXNzTmFtZSA9ICd0b2RvLWhlYWRlcidcclxuICAgICAgICBjb25zdCBoNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2g0JylcclxuICAgICAgICBoNC50ZXh0Q29udGVudCA9IHRhc2sudGl0bGVcclxuICAgICAgICBjb25zdCBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpXHJcbiAgICAgICAgcC50ZXh0Q29udGVudCA9IHRhc2suZGF0ZVxyXG4gICAgICAgIHRvZG9faGVhZGVyX2Rpdi5hcHBlbmRDaGlsZChoNClcclxuICAgICAgICB0b2RvX2hlYWRlcl9kaXYuYXBwZW5kQ2hpbGQocClcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHRvZG9fY29udGVudF9kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgIHRvZG9fY29udGVudF9kaXYuY2xhc3NOYW1lID0gJ3RvZG8tY29udGVudCdcclxuICAgICAgICBjb25zdCBwX3RvZG9fY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxyXG4gICAgICAgIHBfdG9kb19jb250ZW50LmlkID0gJ2Rlc2NyaXB0aW9uJ1xyXG4gICAgICAgIHBfdG9kb19jb250ZW50LnRleHRDb250ZW50ID0gdGFzay5kZXNjcmlwdGlvblxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGRlbGV0ZV90b2RvX2RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgZGVsZXRlX3RvZG9fZGl2LmNsYXNzTmFtZSA9ICdkZWxldGUtdG9kbydcclxuICAgICAgICBkZWxldGVfdG9kb19kaXYudGV4dENvbnRlbnQgPSAnRGVsZXRlJ1xyXG5cclxuICAgICAgICB0b2RvX2NvbnRlbnRfZGl2LmFwcGVuZENoaWxkKHBfdG9kb19jb250ZW50KVxyXG4gICAgICAgIHRvZG9fZGl2LmFwcGVuZENoaWxkKHRvZG9faGVhZGVyX2RpdilcclxuICAgICAgICB0b2RvX2Rpdi5hcHBlbmRDaGlsZCh0b2RvX2NvbnRlbnRfZGl2KVxyXG4gICAgICAgIHRvZG9fZGl2LmFwcGVuZENoaWxkKGRlbGV0ZV90b2RvX2RpdilcclxuICAgICAgICB0b2RvX2xpc3QuYXBwZW5kQ2hpbGQodG9kb19kaXYpXHJcbiAgICBcclxuICAgICAgIHJldHVybiBcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gbG9vcF90aHJvdWdoX3Byb2plY3RzKGxpc3Qpe1xyXG4gICAgICAgIGxldCBsaXN0X29mX3Byb2plY3RzID0gbGlzdFxyXG4gICAgICAgIGxldCB0b2RvX2xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1saXN0JylcclxuICAgICAgICBsZXQgdGFyZ2V0X2luZGV4ID0gbGlzdF9vZl9wcm9qZWN0cy5tYXAocHJvamVjdCA9PiBwcm9qZWN0Lm5hbWUpLmluZGV4T2YobGlzdClcclxuICAgICAgICBsZXQgcHJvamVjdCA9IGxpc3Rfb2ZfcHJvamVjdHNbdGFyZ2V0X2luZGV4XVxyXG4gICAgICAgIGxldCBsaXN0X29mX3Rhc2tzID0gcHJvamVjdC5nZXRUYXNrcygpXHJcbiAgICAgICAgaWYgKGxpc3Rfb2ZfdGFza3MubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIGxpc3Rfb2ZfdGFza3MuZm9yRWFjaCh0YXNrID0+IGNyZWF0ZV90YXNrX2NvbnRhaW5lcih0YXNrKSlcclxuICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgIHRvZG9fbGlzdC5pbm5lckhUTUwgPSBcIlwiXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICBcclxuICAgIH1cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlfcHJvamVjdChhcnJheSwgcHJvamVjdF90aXRsZSl7XHJcbiAgICAgICAgbGV0IGxpc3Rfb2ZfcHJvamVjdHMgPSBhcnJheVxyXG4gICAgICAgIGxldCBuZXdfcHJvamVjdF90aXRsZSA9IHByb2plY3RfdGl0bGVcclxuICAgICAgICB3aGlsZSAobGlzdF9vZl9wcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PT0gbmV3X3Byb2plY3RfdGl0bGUpKXtcclxuICAgICAgICAgICBhbGVydCgnUHJvamVjdCBhbHJlYWR5IHRha2VuIHBsZWFzZSB0cnkgYWdhaW4uJylcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG5ld19wcm9qZWN0ID0gY3JlYXRlX25ld19wcm9qZWN0KG5ld19wcm9qZWN0X3RpdGxlKVxyXG4gICAgICAgIHJldHVybiBuZXdfcHJvamVjdFxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiByZW5kZXJfcHJvamVjdF90b19wYWdlKHByb2plY3Qpe1xyXG4gICAgICAgIGxldCBuZXdfcHJvamVjdCA9IHByb2plY3RcclxuICAgICAgICBsZXQgcHJvamVjdF90aXRsZSA9IHByb2plY3QubmFtZVxyXG4gICAgICAgIGxldCBwcm9qZWN0X2xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1saXN0JylcclxuICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ3Byb2plY3QtaXRlbSdcclxuICAgICAgICBkaXYuaWQgPSBgJHtwcm9qZWN0X3RpdGxlfWBcclxuICAgICAgICBkaXYudGV4dENvbnRlbnQgPSBwcm9qZWN0X3RpdGxlXHJcbiAgICAgICAgbGV0IGNoaWxkX2RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgY2hpbGRfZGl2LmNsYXNzTmFtZSA9ICdjb250YWluZXInXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGNoaWxkX2RpdilcclxuICAgICAgICBwcm9qZWN0X2xpc3QuYXBwZW5kQ2hpbGQoZGl2KVxyXG4gICAgICAgIGNoaWxkX2Rpdi50ZXh0Q29udGVudCA9IG5ld19wcm9qZWN0LmdldFRhc2tzKClcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGVsZXRlX2J1dHRvbnMoKXtcclxuICAgICAgICBsZXQgZGVsZXRlX2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWxldGUtdG9kbycpXHJcbiAgICAgICAgZGVsZXRlX2J1dHRvbi5mb3JFYWNoKChkZWwpID0+IHtcclxuICAgICAgICAgICAgZGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpXHJcbiAgICAgICAgICAgICAgICBsZXQgdGFzayA9IGUudGFyZ2V0LnBhcmVudE5vZGUuaWRcclxuICAgICAgICAgICAgICAgIGRlbGV0ZV90YXNrKGxpc3Rfb2ZfcHJvamVjdHMsdGFzaylcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBleHBvcnQgY29uc3QgcmVuZGVyX3Rhc2tfdG9fcGFnZSA9IChuZXdfdGFzaywgYXJyYXkpID0+IHtcclxuICAgICAgICBsZXQgbGlzdF9vZl9wcm9qZWN0cyA9IGFycmF5XHJcbiAgICAgICAgbGV0IHByb2plY3RfaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1saXN0JylcclxuICAgICAgICBsZXQgY2hpbGRyZW4gPSBBcnJheS5mcm9tKHByb2plY3RfaXRlbXMuY2hpbGRyZW4pXHJcbiAgICAgICAgY29uc29sZS5sb2coJ0hlcmUgaXMgdGhlIGNoaWxkcmVuIGZyb20gcmVuZGVyX3Rhc2tfcGFnZTogJywgY2hpbGRyZW4pXHJcbiAgICAgICAgbGV0IHByb2plY3RfaWQ7XHJcbiAgICAgICAgbGV0IGFkZHByb2plY3Q7XHJcbiAgICAgICAgbGV0IGdyYWJiZWRfcHJvamVjdDtcclxuICAgICAgICBsZXQgbWFnaWN3b3JkID0gJ3Byb2plY3QtaXRlbSBhY3RpdmUnXHJcbiAgICAgICAgbGV0IGRlY2lkZXIgPSBjaGlsZHJlbi5tYXAoKHByb2plY3QpID0+IHByb2plY3QuY2xhc3NOYW1lKS5pbmRleE9mKG1hZ2ljd29yZClcclxuICAgICAgICBwcm9qZWN0X2lkID0gY2hpbGRyZW5bZGVjaWRlcl1cclxuICAgICAgICBwcm9qZWN0X2lkID0gcHJvamVjdF9pZC50ZXh0Q29udGVudFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdIZXJlIGlzIHRoZSBwcm9qZWN0IGlkJywgcHJvamVjdF9pZClcclxuICAgICAgICBhZGRwcm9qZWN0ID0gbGlzdF9vZl9wcm9qZWN0cy5tYXAocHJvamVjdCA9PiBwcm9qZWN0Lm5hbWUpLmluZGV4T2YocHJvamVjdF9pZClcclxuICAgICAgICBjb25zb2xlLmxvZygnSGVyZSBpcyB0aGUgYWRkcHJvamVjdCcsIGFkZHByb2plY3QpXHJcbiAgICAgICAgaWYgKGFkZHByb2plY3QgPT09IC0xKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yLCBwcm9qZWN0IG5vdCBmb3VuZC4nKVxyXG4gICAgICAgIH1cclxuICAgICAgICBncmFiYmVkX3Byb2plY3QgPSBsaXN0X29mX3Byb2plY3RzW2FkZHByb2plY3RdXHJcbiAgICAgICAgY29uc29sZS5sb2coZ3JhYmJlZF9wcm9qZWN0KVxyXG4gICAgICAgIGdyYWJiZWRfcHJvamVjdC5hZGRUYXNrKG5ld190YXNrKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGAke0pTT04uc3RyaW5naWZ5KGdyYWJiZWRfcHJvamVjdC5nZXRUYXNrcygpKX1gKVxyXG4gICAgICAgIGxpc3Rfb2ZfcHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgSGVyZSBpcyB0aGUgcHJvamVjdDogJHtKU09OLnN0cmluZ2lmeShwcm9qZWN0KX0gYW5kIGxpc3Qgb2YgdGFza3M6ICR7SlNPTi5zdHJpbmdpZnkocHJvamVjdC5nZXRUYXNrcygpKX1gKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgZGVsZXRlX2J1dHRvbnMoKVxyXG4gXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIGV4cG9ydCBjb25zdCBkb21fbWFuaXB1bGF0ZSA9IChhcnJheSkgPT4ge1xyXG4gICAgICAgIGxldCBsaXN0X29mX3Byb2plY3RzID0gYXJyYXlcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3QtaXRlbScpXHJcblxyXG4gICAgICAgIGxldCByZW5kZXJfdG9kb3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0b2RvX2xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9kby1saXN0JylcclxuICAgICAgICAgICAgdG9kb19saXN0LmlubmVySFRNTCA9ICcnXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgbGV0IGxvb3BfdGhyb3VnaF9wcm9qZWN0cyA9IChsaXN0KSA9PiB7XHJcbiAgICAgICBcclxuICAgICAgICAgICAgbGV0IHRvZG9fbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2RvLWxpc3QnKVxyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0X2luZGV4ID0gbGlzdF9vZl9wcm9qZWN0cy5tYXAocHJvamVjdCA9PiBwcm9qZWN0Lm5hbWUpLmluZGV4T2YobGlzdClcclxuICAgICAgICAgICAgbGV0IHByb2plY3QgPSBsaXN0X29mX3Byb2plY3RzW3RhcmdldF9pbmRleF1cclxuICAgICAgICAgICAgbGV0IGxpc3Rfb2ZfdGFza3MgPSBwcm9qZWN0LmdldFRhc2tzKClcclxuICAgICAgICAgICAgaWYgKGxpc3Rfb2ZfdGFza3MubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgICAgICBsaXN0X29mX3Rhc2tzLmZvckVhY2godGFzayA9PiBjcmVhdGVfdGFza19jb250YWluZXIodGFzaykpXHJcbiAgICAgICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgICAgIHRvZG9fbGlzdC5pbm5lckhUTUwgPSBcIlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50LmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgICAgICBjaGlsZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGRvbV9tYW5pcHVsYXRlX2FjdGl2ZShjaGlsZC5jbGFzc0xpc3QpXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQuY2xhc3NMaXN0KVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hpbGQuaWQpXHJcbiAgICAgICBcclxuICAgICAgICAgICAgICAgIHJlbmRlcl90b2RvcygpXHJcbiAgICAgICAgICAgICAgICBsb29wX3Rocm91Z2hfcHJvamVjdHMoY2hpbGQuaWQpXHJcbiAgICAgICAgICAgICAgICBcclxuXHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgZGVsZXRlX2J1dHRvbnMoKVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjb25zdCBtYWtlX25ld19wcm9qZWN0X2FjdGl2ZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbGlzdCcpXHJcbiAgICAgICAgbGV0IG5ld19wcm9qZWN0ID0gZWxlbWVudC5sYXN0RWxlbWVudENoaWxkXHJcbiAgICAgICAgZG9tX21hbmlwdWxhdGVfYWN0aXZlKG5ld19wcm9qZWN0LmNsYXNzTGlzdClcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY29uc3QgZG9tX21hbmlwdWxhdGVfYWN0aXZlID0gKHRhcmdldCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdC1pdGVtJylcclxuICAgICAgICBcclxuICAgICAgICBlbGVtZW50LmZvckVhY2goY2hpbGQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKXtcclxuICAgICAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpIFxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGFyZ2V0LnRvZ2dsZSgnYWN0aXZlJylcclxuICAgICAgICBkZWxldGVfYnV0dG9ucygpXHJcbiAgICAgICAgcmV0dXJuIFxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBkZWxldGVfdGFzayhhcnJheSx0YXNrKXtcclxuICAgICAgICBjb25zb2xlLmxvZygnZXhlY3V0aW5nIGRlbGV0ZV90YXNrJylcclxuICAgICAgICBsZXQgbGlzdF9vZl9wcm9qZWN0cyA9IGFycmF5XHJcbiAgICAgICAgY29uc29sZS5sb2cobGlzdF9vZl9wcm9qZWN0cylcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9qZWN0LWl0ZW0nKVxyXG4gICAgICAgIGxldCB0YXJnZXRfcHJvamVjdDtcclxuICAgICAgICBsZXQgdGFyZ2V0X3Rhc2sgPSB0YXNrXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1RoaXMgaXMgdGhlIHRhcmdldCB0YXNrOiAnLCB0YXJnZXRfdGFzaylcclxuICAgXHJcbiAgICAgICAgZWxlbWVudC5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKXtcclxuICAgICAgICAgICAgICAgIHRhcmdldF9wcm9qZWN0ID0gY2hpbGQuaWRcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIZXJlIGlzIHRoZSB0YXJnZXQgcHJvamVjdDogJywgdGFyZ2V0X3Byb2plY3QpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBsaXN0X29mX3Byb2plY3RzLmZvckVhY2goKHByb2plY3QpID0+IHtcclxuICAgICAgICAgICAgaWYgKHByb2plY3QubmFtZSA9PT0gdGFyZ2V0X3Byb2plY3Qpe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0X3Byb2plY3QgPSBwcm9qZWN0XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgdGhlIGFjdHVhbCBwcm9qZWN0IGZyb20gbGlzdCBvZiBwcm9qZWN0cyEgOikgJywgdGFyZ2V0X3Byb2plY3QpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUYXNrIGJlZm9yZSBiZWluZyBkZWxldGVkJywgdGFyZ2V0X3Byb2plY3QuZ2V0VGFza3MoKSlcclxuICAgICAgICB0YXJnZXRfcHJvamVjdC5kZWxldGVUYXNrKHRhcmdldF90YXNrKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUYXNrIGRlbGV0ZWQnLCB0YXJnZXRfcHJvamVjdC5nZXRUYXNrcygpKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRhcmdldF9wcm9qZWN0KVxyXG4gICAgICAgIGNvbnN0IHJlbW92ZV90b2RvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGFyZ2V0X3Rhc2t9YClcclxuICAgICAgICB3aGlsZShyZW1vdmVfdG9kby5maXJzdENoaWxkKXtcclxuICAgICAgICAgICAgcmVtb3ZlX3RvZG8ucmVtb3ZlQ2hpbGQocmVtb3ZlX3RvZG8uZmlyc3RDaGlsZClcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVtb3ZlX3RvZG8ucmVtb3ZlKClcclxuICAgXHJcbiAgICB9XHJcblxyXG4iLCJpbXBvcnQgY3JlYXRlX25ld19wcm9qZWN0IGZyb20gXCIuL3Byb2plY3QuanNcIlxyXG5pbXBvcnQgY3JlYXRlTmV3VGFzayBmcm9tIFwiLi90b2RvLmpzXCJcclxuaW1wb3J0IHsgZG9tX21hbmlwdWxhdGUsIHJlbmRlcl90YXNrX3RvX3BhZ2UsIHJlbmRlcl9wcm9qZWN0X3RvX3BhZ2UsIG1ha2VfbmV3X3Byb2plY3RfYWN0aXZlLCBjcmVhdGVfdGFza19jb250YWluZXIsIGRlbGV0ZV90YXNrIH0gZnJvbSBcIi4vZGlzcGxheUNvbnRyb2xsZXIuanNcIlxyXG5cclxuZnVuY3Rpb24gVUkgKCkge1xyXG4gICAgLyotLS0tLS0tLUFSVElDTEUgTElOS1MtLS0tLS0tLS0tKi9cclxuICAgIGNvbnN0IGhvbWVidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaG9tZScpXHJcbiAgICBjb25zdCBuZXdfcHJvamVjdF9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FydGljbGUtcHJvamVjdCcpXHJcbiAgICBjb25zdCBuZXdfdG9kb19mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FydGljbGUtdG9kbycpXHJcblxyXG5cclxuICAgIC8qLS0tLS0tLSBBQ1RJVkUgUFJPSkVDVCBGT1JNL1RPRE8gRk9STVMtLS0tLS0tLS0tKi9cclxuICAgIGNvbnN0IG9wZW5fcHJvamVjdF9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wZW5wcm9qZWN0Zm9ybScpXHJcbiAgICBjb25zdCBzdWJtaXRfcHJvamVjdF9idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3VibWl0X3Byb2plY3QnKVxyXG4gICAgY29uc3QgZXhpdF9wcm9qZWN0X2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNleGl0LXByb2plY3QtZm9ybScpIFxyXG5cclxuICAgIGNvbnN0IG9wZW5fdG9kb19mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29wZW50b2RvZm9ybScpXHJcbiAgICBjb25zdCBzdWJtaXRfdG9kb19idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3VibWl0X3RvZG8nKVxyXG4gICAgY29uc3QgZXhpdF90b2RvX2J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNleGl0LXRvZG8tZm9ybScpIFxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAvKioqKioqKiBMSVNUIFRPIFJFTkRFUiBBTEwgVEhFIE5FVyBQUk9KRUNUUyAqKioqKioqKi9cclxuICAgIGNvbnN0IGxpc3Rfb2ZfcHJvamVjdHMgPSBbXVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBkZWxldGVfYnV0dG9ucygpe1xyXG4gICAgICAgIGxldCBkZWxldGVfYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRlbGV0ZS10b2RvJylcclxuICAgICAgICBkZWxldGVfYnV0dG9uLmZvckVhY2goKGRlbCkgPT4ge1xyXG4gICAgICAgICAgICBkZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSlcclxuICAgICAgICAgICAgICAgIGxldCB0YXNrID0gZS50YXJnZXQucGFyZW50Tm9kZS5pZFxyXG4gICAgICAgICAgICAgICAgZGVsZXRlX3Rhc2sobGlzdF9vZl9wcm9qZWN0cyx0YXNrKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgbmV3X3Byb2plY3RfZm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgb3Blbl9wcm9qZWN0X2Zvcm0uc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZSgxKVwiXHJcbiAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQpXHJcbiAgICB9KVxyXG5cclxuICAgIG5ld190b2RvX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIG9wZW5fdG9kb19mb3JtLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoMSlcIlxyXG4gICAgfSlcclxuXHJcbiAgICBleGl0X3RvZG9fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IG9wZW5fdG9kb19mb3JtLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoMClcIilcclxuICAgIGV4aXRfcHJvamVjdF9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gb3Blbl9wcm9qZWN0X2Zvcm0uc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZSgwKVwiKVxyXG5cclxuXHJcbiAgICBzdWJtaXRfcHJvamVjdF9idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgIGxldCBuZXdfcHJvamVjdCA9IGNyZWF0ZV9uZXdfcHJvamVjdChvcGVuX3Byb2plY3RfZm9ybS50aXRsZS52YWx1ZSlcclxuICAgICAgICBjb25zb2xlLmxvZyhuZXdfcHJvamVjdClcclxuICAgICAgICByZW5kZXJfcHJvamVjdF90b19wYWdlKG5ld19wcm9qZWN0KVxyXG4gICAgICAgIGxpc3Rfb2ZfcHJvamVjdHMucHVzaChuZXdfcHJvamVjdClcclxuICAgICAgICBjb25zb2xlLmxvZygnSGVyZSBpcyBsaXN0IG9mIHByb2plY3RzJywgbGlzdF9vZl9wcm9qZWN0cylcclxuICAgICAgICBvcGVuX3Byb2plY3RfZm9ybS5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKDApXCJcclxuICAgICAgICBkb21fbWFuaXB1bGF0ZShsaXN0X29mX3Byb2plY3RzKVxyXG4gICAgICAgIG1ha2VfbmV3X3Byb2plY3RfYWN0aXZlKClcclxuICAgIH0pXHJcblxyXG4gICAgc3VibWl0X3RvZG9fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICBsZXQgbmV3X3Rhc2sgPSBjcmVhdGVOZXdUYXNrKG9wZW5fdG9kb19mb3JtLnRpdGxlLnZhbHVlLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3Blbl90b2RvX2Zvcm0uZGF0ZS52YWx1ZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5fdG9kb19mb3JtLmRlc2NyaXB0aW9uLnZhbHVlKVxyXG4gICAgICAgIHJlbmRlcl90YXNrX3RvX3BhZ2UobmV3X3Rhc2ssbGlzdF9vZl9wcm9qZWN0cylcclxuICAgICAgICBjcmVhdGVfdGFza19jb250YWluZXIobmV3X3Rhc2spXHJcbiAgICAgICAgb3Blbl90b2RvX2Zvcm0uc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZSgwKVwiXHJcbiAgICAgICAgZGVsZXRlX2J1dHRvbnMoKVxyXG4gICAgfSlcclxuXHJcblxyXG5cclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVJO1xyXG4iLCJjb25zdCBwcm9qZWN0ID0gKG5hbWUpID0+IHtcclxuICAgIGxldCB0YXNrcyA9IFtdO1xyXG4gICAgY29uc3QgcHJvdG8gPSB7XHJcbiAgICAgICAgYWRkVGFzazogKHRhc2spID0+IHtcclxuICAgICAgICAgICAgdGFza3MucHVzaCh0YXNrKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVsZXRlVGFzazogKHRhc2tUaXRsZSkgPT4ge1xyXG4gICAgICAgICAgICB0YXNrcyA9IHRhc2tzLmZpbHRlcih0YXNrID0+IHRhc2sudGl0bGUgIT0gdGFza1RpdGxlKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0VGFza3M6ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhc2tzXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgIH07XHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwcm90bywgeyBuYW1lIH0pO1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlX25ld19wcm9qZWN0ID0gKG5hbWUpID0+IHtcclxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBwcm9qZWN0KG5hbWUpXHJcblxyXG4gICAgcmV0dXJuIG5ld1Byb2plY3RcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlX25ld19wcm9qZWN0XHJcbiIsImNvbnN0IHRhc2sgPSAodGl0bGUsZGF0ZSxkZXNjcmlwdGlvbikgPT4ge1xyXG4gICAgcmV0dXJuIHt0aXRsZSxkYXRlLGRlc2NyaXB0aW9ufVxyXG59XHJcblxyXG5jb25zdCBjcmVhdGVOZXdUYXNrID0gKHRpdGxlLGRhdGUsZGVzY3JpcHRpb24pID0+IHtcclxuICAgIGNvbnN0IG5ld1Rhc2sgPSB0YXNrKHRpdGxlLGRhdGUsZGVzY3JpcHRpb24pXHJcbiAgICByZXR1cm4gbmV3VGFza1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVOZXdUYXNrXHJcblxyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQgVUkgZnJvbSBcIi4vbW9kdWxlcy9VSS5qc1wiXHJcblxyXG5VSSgpOyJdLCJuYW1lcyI6WyJjcmVhdGVfdGFza19jb250YWluZXIiLCJuZXdfdGFzayIsInRhc2siLCJ0b2RvX2xpc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0b2RvX2RpdiIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpZCIsInRpdGxlIiwidG9kb19oZWFkZXJfZGl2IiwiaDQiLCJ0ZXh0Q29udGVudCIsInAiLCJkYXRlIiwiYXBwZW5kQ2hpbGQiLCJ0b2RvX2NvbnRlbnRfZGl2IiwicF90b2RvX2NvbnRlbnQiLCJkZXNjcmlwdGlvbiIsImRlbGV0ZV90b2RvX2RpdiIsImRlbGV0ZV9idXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJkZWwiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwiZGVsZXRlX3Rhc2siLCJsaXN0X29mX3Byb2plY3RzIiwiZG9tX21hbmlwdWxhdGVfYWN0aXZlIiwiY2hpbGQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsInRvZ2dsZSIsImFycmF5IiwidGFyZ2V0X3Byb2plY3QiLCJlbGVtZW50IiwidGFyZ2V0X3Rhc2siLCJwcm9qZWN0IiwibmFtZSIsImdldFRhc2tzIiwiZGVsZXRlVGFzayIsInJlbW92ZV90b2RvIiwiZ2V0RWxlbWVudEJ5SWQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJuZXdfcHJvamVjdF9mb3JtIiwibmV3X3RvZG9fZm9ybSIsIm9wZW5fcHJvamVjdF9mb3JtIiwic3VibWl0X3Byb2plY3RfYnV0dG9uIiwiZXhpdF9wcm9qZWN0X2J1dHRvbiIsIm9wZW5fdG9kb19mb3JtIiwic3VibWl0X3RvZG9fYnV0dG9uIiwiZXhpdF90b2RvX2J1dHRvbiIsInN0eWxlIiwidHJhbnNmb3JtIiwicHJldmVudERlZmF1bHQiLCJuZXdfcHJvamVjdCIsIm5ld1Byb2plY3QiLCJ0YXNrcyIsInByb3RvIiwiYWRkVGFzayIsInB1c2giLCJ0YXNrVGl0bGUiLCJmaWx0ZXIiLCJPYmplY3QiLCJhc3NpZ24iLCJ2YWx1ZSIsInByb2plY3RfdGl0bGUiLCJwcm9qZWN0X2xpc3QiLCJkaXYiLCJjaGlsZF9kaXYiLCJyZW5kZXJfcHJvamVjdF90b19wYWdlIiwiaW5uZXJIVE1MIiwibGlzdCIsInRhcmdldF9pbmRleCIsIm1hcCIsImluZGV4T2YiLCJsaXN0X29mX3Rhc2tzIiwibGVuZ3RoIiwibG9vcF90aHJvdWdoX3Byb2plY3RzIiwiZG9tX21hbmlwdWxhdGUiLCJsYXN0RWxlbWVudENoaWxkIiwibWFrZV9uZXdfcHJvamVjdF9hY3RpdmUiLCJuZXdUYXNrIiwicHJvamVjdF9pZCIsImFkZHByb2plY3QiLCJncmFiYmVkX3Byb2plY3QiLCJwcm9qZWN0X2l0ZW1zIiwiY2hpbGRyZW4iLCJBcnJheSIsImZyb20iLCJkZWNpZGVyIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlbmRlcl90YXNrX3RvX3BhZ2UiXSwic291cmNlUm9vdCI6IiJ9